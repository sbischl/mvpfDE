---
title: "Bildungsreformen"
output:
    html_document:
        fig_retina: 1
---

```{r echo=FALSE, include=FALSE}
# Run the code necessary to get a list named res to access all the results. (Returned from listifyResults(.)) Probably it makes sense to load from disk, because caluclating every time is really slow.
res <- readRDS(file="results.RData")
number_of_js_plots <- 0

format <- function(result, flipsign = FALSE) {
  if (flipsign) {
    result = - result
  }
  toString(round(result,2))
}

library(ggplot2)
library(rjson)
library(scales)
library(showtext)

# Try to load the alternative font that is used in the pdf exports.
# If this font is not installed / cannot be found, the standard one will be used
tryCatch({
  plot_font <<- "Calibri"
  font_add(plot_font, "OpenSans-Regular.ttf")
}, error = function(e) {
  warning("Font is not installed. Plots are going to use the standard font instead.")
  plot_font <<- "sans"
})
showtext_auto()

makePlot <- function(program, type, heading = "", js = T) {
  if (missing(program) || missing(type)) {
    print("Need to specify program and type")
    return(0)
  }

  label <- switch(type, "wtp" = "Zahlungsbereitschaft", "cost" = "Fiskalische Kosten")
  variable <- switch(type, "wtp" = "willingness_to_pay", "cost" = "government_net_costs")

  if (js == TRUE) {
    if (number_of_js_plots > 0) {
      return(htmltools::HTML(sprintf(r"(<canvas id="chart%s" style="width: 100%%; height: %ipx"></canvas>
      <script>
      async function drawGraphs() {
        while(true) {
          if (content_loaded) {
            break;
          }
          else {
            await new Promise(r => setTimeout(r, 200));
          }
        }
        drawChart(unmodified_dataset, "%s", "%s", "%s");
      }
      drawGraphs();
      </script>
      )", paste0(program,variable), 170, variable, program, heading)))
    }

  # We have to split this in multiple strings because sprintf cannot print into strings longer than 8000 characters..
  variable_decs <- sprintf(r"(<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.0/chart.min.js"></script>
  <canvas id="chart%s" style="width: 100%%; height: %ipx"></canvas>
  <script>
    var unmodified_dataset;
    var document_root = "";
    var content_loaded = false;
    var additional_program_info;
    var categories;
    var colors;
    var variable_mapping;
    var tooltip_counter = 1;
    )", paste0(program,variable), 170)

    functions <- r"(async function loadJSON(url) {
    var json;
    await fetch(url).then(response => {
        json = response.json();
    });
    return json;
    }

    async function readjson(assumption_string) {
    // depends on additional_program_info being loaded as we need some way of determining which government policies exist before this function can be called

    // This will be the array carrying the data. It should be compatible to the array returned from readcsv with the only difference that the json format omits all the keys with NA values.
    var json_as_array;

    // First we need to get a list of all programs. Where the entries are strings
    var programs = additional_program_info.map(program => {
        return program.program_identifier;
    });

    // Individual json requests to all of the programs
    var requests = programs.map(program => {
        // Note: usually one would expect that this code runs the loadJSON and stores the
        // result in requests. This is not what we want, as the http requests should be
        // run in parallel for better performance. Fortunately, this is not what is happening. loadJSON is a async function. And async functions return promises. which are not automatically resolved.
        return loadJSON(document_root + "data/" + program + "/" + assumption_string + ".json");
    });

    // Resolve promises in parallel
    await Promise.all(requests).then((result) => json_as_array = result);

    // This loop merges the loaded ddata with the details about each reform (description, sources, age etc..) form programs.json. The resulting array of objects then contains all relevant data.

    for (var i = 0; i < json_as_array.length; i++) {
        Object.assign(json_as_array[i], additional_program_info[i]);
        // Rename program identifier to program. (For compatibility with the old solution)
        json_as_array[i]["program"] = json_as_array[i]["program_identifier"];
        delete json_as_array[i]["program_identifier"];
    }

    unmodified_dataset = JSON.parse(JSON.stringify(json_as_array));

    // sort by category & ensure that categories is defined already
    if (typeof(categories) != "undefined") {
        unmodified_dataset.sort(function(a, b){
            return categories.indexOf(a.category) - categories.indexOf(b.category);
        });
    }
    return json_as_array;
}

function getScalesMinMax(program) {
    // we want the same scale on all of the bar plots. To ensure this we calculate the required min length of the x-axis for each plot and apply the largest to all.
    let relevant_datapoint = unmodified_dataset.find(function (datapoint) {
        return (datapoint.program === program);
    });

    let max = addAllPositivesSubtractAllNegatives([
        Math.abs(parseFloat(relevant_datapoint["willingness_to_pay"]),
            -Math.abs(parseFloat(relevant_datapoint["government_net_costs"])))
    ]);
    let mappingEntry;

    for (let i = 0; i < variable_mapping.length; i++) {
        if (variable_mapping[i].program === program) {
            mappingEntry = variable_mapping[i];
            break;
        }
    }

    barComponents = mappingEntry["willingness_to_pay"];
    let array = [];
    let component;
    for (component in barComponents) {
        array.push(parseFloat(relevant_datapoint[component]));
    }
    max = Math.max(addAllPositivesSubtractAllNegatives(array), max);


    barComponents = mappingEntry["government_net_costs"];
    array = [];
    for (component in barComponents) {
        array.push(parseFloat(relevant_datapoint[component]));
    }
    max = Math.max(addAllPositivesSubtractAllNegatives(array), max);

    return (max);
}

function selectColor(number, background = false) {
    // returns a string in the format rgba(123,123,123,0.6)
    let background_opa = 0.7
    let foreground_opa = 0.9
    if (number > colors.length) {
        console.log("Color not in range of supplied colors in colors.json");
        // Reuse last color in this case
        number = colors.length;
    }
    color_triple = colors[number - 1];
    return `rgba(${color_triple[0]},${color_triple[1]},${color_triple[2]},${background ? background_opa : foreground_opa})`;
}

function addAllPositivesSubtractAllNegatives(array) {
    let negative = 0;
    let positive = 0;
    let i;
    for (i = 0; i < array.length; i++) {
        if (array[i] > 0) {
            positive += array[i];
        }
        else {
            negative -= array[i];
        }
    }
    return (Math.max(Math.abs(positive), Math.abs(negative)));
}

function generateBarData(csv_as_array, variable_to_plot, program) {
    let datasets = [];
    let barComponents;
    let bar_counter = 1;
    let relevant_datapoint = unmodified_dataset.find(function (datapoint) {
        return (datapoint.program === program);
    });
    if (variable_to_plot === "mvpf") {
        datasets.push({
            label: "Government Net Cost",
            data: [parseFloat(relevant_datapoint["government_net_costs"])],
            backgroundColor: selectColor(bar_counter, true),
            borderColor: selectColor(bar_counter),
        });
        datasets.push({
            label: "Willingness to Pay",
            data: [relevant_datapoint["willingness_to_pay"]],
            backgroundColor: selectColor(bar_counter + 1, true),
            borderColor: selectColor(bar_counter + 1),
        });
        bar_counter += 2;
        return (datasets);
    }
    for (let i = 0; i < variable_mapping.length; i++) {
        if (variable_mapping[i].program === program) {
            barComponents = variable_mapping[i][variable_to_plot];
            break;
        }
    }
    for (component in barComponents) {
        datasets.push({
            label: barComponents[component],
            data: [relevant_datapoint[component]],
            backgroundColor: selectColor(bar_counter, true),
            borderColor: selectColor(bar_counter)
        });
        bar_counter++;
    }
    bar_counter = 1;
    return (datasets);
}
)"
drawChart <- r"(function drawChart(csv_as_array, variable_to_plot, program, heading = "") {
    let chartElement = document.getElementById('chart' + program + variable_to_plot);
    // Get Plotting range
    let range = getScalesMinMax(program);
    let chart = new Chart(chartElement, {
        type: 'bar',
        data: {
            labels: '.', // In ChartJS Beta 3.0 this could be left empty. If we leave it empty in 3.3, there is no graph drawn anymore. (And the tooltip is now shared for all areas of the chart in 3.3).
            datasets: generateBarData(csv_as_array, variable_to_plot, program)
        },
        options: {
            indexAxis: 'y',
            responsive: false,
            maintainAspectRatio: false,
            aspectRatio: 4,
            //devicePixelRatio: 4, //Set this to save a high res png. Otherwise leave default
            plugins: {
                title: {
                    display: true,
                    text: heading,
                    align: "start",
                    position: "top"
                },
                legend: {
                    position: 'bottom',
                    usePointStyle: true,
                    onClick: () => {} //This disables the ability to click on the legend and remove effects.
                },
                tooltip: {
                    enabled: true,
                    displayColors: false,
                    bodyColor: "black",
                    backgroundColor: "white",
                    borderWidth: 2,
                    cornerRadius: 8,
                    bodyFont: {weight: 600},
                    borderColor: "#2b6ebe",
                    mode: 'nearest',
                    callbacks: {
                        title: function (data) {
                            return null;
                        }
                    }
                }
            },
            scales: {
                x: {
                    stacked: true,
                    ticks: {
                        maxTicksLimit: 3
                    },
                    grid: {
                        drawOnChartArea: false,
                        lineWidth: 0,
                        tickWidth: 1
                    },
                    min: -range,
                    max: range,
                    afterTickToLabelConversion: function(data) {
                        // this adds € signs to the tick marks on the x-axis.
                        let ticks = data.ticks;
                        for (var i = 0; i < ticks.length; i++) {
                            ticks[i].label = ticks[i].label.replace(".", "placeholder").replace(",", ".").replace("placeholder", ",") + "€";
                        }
                        return data;
                    }
                },
                y: {
                    stacked: true,
                    display: false
                }
            }
        }
    });
})"
    js_exec <- sprintf(r"(if (true) {
        // load the dataset:
        Promise.all([
        loadJSON(document_root + "data/programs.json"),
        loadJSON(document_root + "data/categories.json")
    ]).then(return_values => {
        additional_program_info = return_values[0];
        categories = return_values[1];
        return Promise.all([
            readjson("default"),
            loadJSON(document_root + "data/variable_mapping.json"),
            loadJSON(document_root + "data/colors.json")
        ]);
    }).then((return_values) => {
        variable_mapping = return_values[1];
        colors = return_values[2];
        drawChart(return_values[0], "%s", "%s", "%s");
        content_loaded = true;
    });
}
</script>)",variable, program, heading)
    number_of_js_plots <<- number_of_js_plots + 1
    return(htmltools::HTML(paste0(variable_decs, functions, drawChart, js_exec)))
  }


  variable_mapping = rjson::fromJSON(file = "variable_mapping.json")

  # Construct the dataset
  for (i in 1:length(variable_mapping)) {
    if (variable_mapping[[i]]$program == program) {
      relevant_data <- variable_mapping[[i]]
    }
  }

  colors <- c(rgb(46,139,87, maxColorValue = 255),
              rgb(30,144,255, maxColorValue = 255),
              rgb(255,165,0, maxColorValue = 255),
              rgb(220,20,60, maxColorValue = 255),
              rgb(0,128,128, maxColorValue = 255),
              rgb(0,0,139, maxColorValue = 255),
              rgb(255,20,147, maxColorValue = 255),
              rgb(165,42,42, maxColorValue = 255),
              rgb(154,205,50, maxColorValue = 255),
              rgb(196, 196, 126, maxColorValue = 255),
              rgb(189,189,189, maxColorValue = 255))

  getValue <- function(name) {
    return(res[[program]][[name]])
  }
  getRange <- function(data) {
    positives = 0
    negatives = 0
    for (i in 1:length(data$values)) {
      if (data$values[[i]] >= 0) {
        positives = positives + data$values[[i]]
      }
      else {
        negatives = negatives - data$values[[i]]
      }
    }
    return(max(c(positives, negatives)))
  }

  data <- data.frame(values = sapply(names(relevant_data[[variable]]), getValue),
                     labels = unlist(relevant_data[[variable]], use.names=FALSE), x = 0)

  plot <- ggplot(data) + geom_col(aes(y = values, x = x, fill = labels)) +
          coord_flip() + theme(legend.position = "bottom") +
          scale_y_continuous(labels = function(x) paste0(x, "€"), limits = c(-getRange(data), getRange(data))) +
          scale_fill_manual(values = colors) +
          scale_shape_manual(values = 21) +
          ylab(label) +
          guides(fill=guide_legend(ncol=3,byrow=TRUE)) +
          theme_minimal(base_size=20,  base_family=plot_font) %+replace%
          theme (
          # axis.line.x|y control whether the x and y axis are drawn. It can look stylish to omit one or both:
          # axis.line.y = element_blank() to omit
          # e.g: axis.line.x = element_line(color = "darkgrey", size = 0.5) to draw
          axis.line.y = element_blank(),
          axis.line.x = element_line(color = "darkgrey", size = 0.75),
          axis.title.y=element_blank(),
          panel.border = element_blank(),
          panel.grid.minor = element_blank(),
          panel.grid.major = element_blank(),
          # Enable or Disable Axis ticks:
          axis.ticks = element_line(color = "darkgrey", size = 0.75),
          axis.ticks.y = element_blank(),
          # Removes Legend Explanation:
          legend.title=element_blank(),
          # Set location of legend:
          legend.position = "bottom",
          # Legend font size
          legend.text = element_text(size=10.5),
          # Axis (ticks) size
          axis.text = element_text(size=11.5),
          axis.text.y = element_blank(),
          # Axis label size
          axis.title = element_text(size=14),
          # Change Legend Stacking to vertical:
          legend.box="vertical"
          )
  print(plot)
}

```

## Bafög Reform 1990

Im Jahr 1990 wurde die staatliche Förderung von Studierenden nach dem Bundesausbildungsförderungsgesetz (BAföG) grundlegend zu gunsten der BAföG berechtigten Studierenden angepasst. Zwischen 1983 und 1989 bestand die BAföG Leistung aus einem zinsfreien Darlehen, das nach Abschluss des Studiums vollständig zurückgezahlt werden musste. Nach der Reform im Jahr 1990 wurde im Regelfall etwa die Hälfte des Darlehens als Zuschuss gewährt, der nicht zurückgezahlt werden muss. Es sollten somit die Anreize ein Universitätsstudium aufzunehmen für Studierende deren Eltern über geringe Einkommen verfügen verbessert werden. [Baumgartner & Steiner (2006)](https://ideas.repec.org/p/iza/izadps/dp2034.html) evaluieren den Effekt der BAföG Reform auf die Anzahl an geförderten Studierenden die ein Studium an deutschen Universitäten aufnehmen. Es wird ein Effekt von 4 Prozentpunkten auf die Wahrscheinlichkeit ein Universitätsstudium aufzunehmen gefunden. Dieser Schätzer ist zentral für die Berechnung des MVPF.

Der Wert der Reform für die Begünstigten der Reform, also den von BAföG geförderten Studierenden, besteht aus zwei Effekte. Zunächst erhalten Studierende die BAföG beziehen `r format(res$bafoegRepayment$bafoeg_valuation)` Euro (Barwert diskontiert über die Dauer des Studiums) durch die Erlassung von 50% der BAföG-Schulden. Studierende die aufgrund der BAföG Reform ein Studium aufnehmen, also diejenigen die nicht studiert hätten, wenn die Reform nicht durchgeführt worden wäre, profitieren aufgrund der hohen Bildungsrenditen in Deutschland stark von der Reform. Der Effekt der zusätzlichen Bildung wird mithilfe einer Einkommensprojektion auf Basis von administrativen Daten des IAB abgeschätzt. Es ergibt sich eine Zunahme des erwarteten Einkommen pro BAföG-Berechtigten von `r format(res$bafoegRepayment$net_income_increase)` Euro. Die Summe der Zahlungsbereitschaften für die Reform beträgt somit `r format(res$bafoegRepayment$willingness_to_pay)` Euro. Die beiden Effekte sind in folgender Grafik dargestellt:
```{r echo = FALSE, fig.align = 'center', fig.width = 8, fig.height = 2.4, fig.showtext=TRUE}
makePlot("bafoegRepayment", "wtp", "Zahlungsbereitschaft für die BAföG Reform 1990")
```
Die Kosten des Staates setzen sich aus vier Komponenten zusammen. Zunächst muss der Staat auf 50% der Rückzahlung des Kredits verzichten. Es entstehen Kosten in Höhe von `r format(res$bafoegRepayment$bafoeg_valuation)` Euro pro BAföG-Berechtigten. Die zusätzlichen Studierenden verursachen zusätzliche Bildungsausgaben in Höhe von `r format(res$bafoegRepayment$education_cost)` Euro. Die Berechnung dieser Kosten beruht auf Daten des [statistischen Bundesamts](https://www.statistischebibliothek.de/mir/receive/DESerie_mods_00000117) über die jährlichen Ausgaben pro Studierenden an deutschen Universitäten. Ebenso steigt durch die zusätzlichen Studienanfänger die Anzahl an von BAföG geförderten Studenten. Diese Kostenkomponente wird auf `r format(res$bafoegRepayment$bafoeg_cost)` Euro geschätzt. Letztlich kann der Staat einen erheblichen Teil der zusätzlichen Ausgaben durch zusätzliche Steuereinnahmen zurückgewinnen. Studierende, die aufgrund der Reform ein höheres Bildungsniveau erreichen, erzielen über ihre gesamte berufliche Laufbahn höhere Bruttoeinkommen, wodurch zusätzliches Steueraufkommen generiert wird. Unter Verwendung der zuvor genannten Einkommensprojektion ergibt sich ein zusätzliches Steueraufkommen von `r format(res$bafoegRepayment$tax_revenue_increase, T)` Euro pro BAföG-Berechtigten. Die Summe der Effekte auf das Budget des Staates beträgt `r format(res$bafoegRepayment$government_net_costs)` Euro. Die folgende Grafik zeigt die relative Größe der genannten Effekte zusammen:
```{r echo = FALSE, fig.align = 'center', fig.width = 8, fig.height = 2.75, fig.showtext=TRUE}
makePlot("bafoegRepayment", "cost", "Kostenkomposition der BAföG Reform 1990")
```

Der Marginal Value of Public Funds ist definiert als das Verhältnis der Wert der Reform für die Begünstigten der Reform zu den fiskalischen Kosten der Reform. Folglich ergibt sich ein MVPF von `r format(res$bafoegRepayment$mvpf)` für die BAföG Reform des Jahres 1990. Pro Euro Steuergeld der in die Finanzierung der BAföG Reform investiert wurden, erhielten BAföG berechtigte Studierende einen Wert von `r format(res$bafoegRepayment$mvpf)` Euro.

## Bafög Reform 2001
Eine Reform des BAföG (Bafög) aus dem Jahr 2001 erweiterte den Kreis der BAföG Berechtigten. Das elterliche Einkommen, bis zu welchem die gesamte Förderung beansprucht werden kann, wurde um circa 20% angehoben. Dies hatte zur Folge, dass die Anzahl an Bafög Berechtigen Studierenden um mehr als 50% zunahm. Baumgartner & Steiner (2006) untersuchen, inwiefern es dieser Politikmaßnahme gelang die Anzahl an Studienanfänger zu erhöhen. Mit einem Difference-in-Difference Ansatz finden die Autoren, dass die Studienanfängerquote um 1,5 Prozentpunkte gesteigert werden konnte. Zur Evaluierung dieser Reform im Rahmen des MVPF Frameworks, müssen sowohl der Wertschätzung (Zahlungsbereitschaft) der Bafög Bezieher für die Implementierung der Reform, als auch die Kosten die auf Seite des Staates entstehen berechnet werden. Die Zahlungsbereitschaft setzt sich aus zwei Komponenten zusammen. Erstens erhalten weitere Studierende nun BAföG Förderung, wovon nur circa die Hälfte zurückgezahlt werden muss. Dieser Effekt beträgt gemittelt über alle potenziellen Studienanfänger `r format(res$bafoeg2001$reform_valuation)` Euro. Dazu kommt das gestiegene erwartete Einkommen welches Studierende die aufgrund des erweiterten Bafög ein Studium aufnehmen erzielen. Zur Berechnung der Bildungsrenditen wird eine Einkommensprojektion auf Basis von Daten des IAB verwendet. Gemittelt über alle potenziellen Studienanfänger ergibt sich ein Effekt von `r format(res$bafoeg2001$net_income_increase)` Euro. Eine Übersicht über die errechnete Zahlungsbereitschaft ist in folgender Grafik zu finden:

```{r echo = FALSE, fig.align = 'center', fig.width = 8, fig.height = 2.4, fig.showtext=TRUE}
makePlot("bafoeg2001", "wtp", "Zahlungsbereitschaft für die BAföG Reform 2001")
```

Demgegenüber stehen die fiskalischen Kosten. Hier werden drei Komponenten berücksichtigt. Die Auszahlung der BAföG-Föderung an weitere Studierende verursacht diskontiert unter Berücksichtigung der Rückzahlung von 50% der Förderung, Kosten in Höhe von `r format(res$bafoeg2001$program_cost)` Euro. Zur Berechnung dieses Wertes wurde die durchschnittliche Höhe der BAföG-Förderung im Jahr 2001 verwendet und eine durchschnittliche Studiendauer von 5 Jahren angenommen. Die zusätzlichen Studienanfänger verursachen Kosten im Bildungssystem. Da deutsche Universitäten staatlich finanziert sind, kommt der Staat für die Mehrkosten des Studiums gegenüber einer Ausbilung auf. Aus Daten des statistischen Bundesamt über die Ausgaben für Universitäten und Berufsschulen errechnen sich Mehrkosten in Höhe von `r format(res$bafoeg2001$education_cost)`. Schließlich profitiert der Staatshaushalt von gestiegenen Einkommen der zusätzlichen Studienanfänger und den damit einhergehenden Einkommenssteuerzahlungen. Unter Berücksichtigung des deutschen Einkommenssteuersystems ergibt sich gemäß der verwendeten Einkommensprojektion ein diskontiertes zusätzliches Steueraufkommen in Höhe von `r format(res$bafoeg2001$tax_revenue_increase, T)` Euro. Die Kostenkomponenten sind in folgendem Balkendiagramm visualisiert:
```{r echo = FALSE, fig.align = 'center', fig.width = 8, fig.height = 2.4, fig.showtext=TRUE}
makePlot("bafoeg2001", "cost", "Kostenkomposition der BAföG Reform 2001")
```
Nach aufsummieren der fiskalischen Kosten und der Zahlungsbereitschaft für die Reform ergibt sich ein Kosten-Nutzen Verhältnis von `r format(res$bafoeg2001$mvpf)`.

## Realschulabschluss mit Beendigung 10. Klasse Gymnasium
Zwischen 1965 und 1996 wurde in allen deutschen Bundesländern die mittlere Reife, also der Realschulabschluss als Zwischenabschluss des Gymnasiums eingeführt. Mit erfolgreicher Beendigung der 10. Klasse erhalten Schüler die mittlere Reife, auch wenn sie die Oberstufe des Gymnasiums nicht abschließen. Diese Reform sollte verhindern, dass Schüler bei nicht Bestehen des Abiturs die Schule ohne Abschluss verlassen müssen. Die Reform ist insbesondere für Schüler relevant, die die Möglichkeit haben ein Gymnasium zu besuchen, aber aufgrund der Möglichkeit des späten Scheiterns in der Oberstufe sich dazu entscheiden die Realschule zu besuchen. Der Realschulabschluss nach der 10. Klasse stellt eine Versicherung gegen diesen Fall dar und könnte somit zusätzlichen Schülern den Anreiz geben das Gymnasium zu besuchen.
[Obergruber & Zierow (2020)](https://ideas.repec.org/a/eee/ecoedu/v75y2020ics0272775718307179.html) zeigen, dass die Reform den gewünschten Effekt hatte. Die Wahrscheinlichkeit das Gymnasium erfolgreich abzuschließen stieg um 24.5 Prozentpunkte. Im Schnitt verlängerte die Reform die durchschnittliche Anzahl der Schuljahre um 0.767. Da diese Reform keine direkten Kosten versucht sind lediglich die vom Staat getragenen Kosten für die zusätzlichen Schuljahre am Gymnasium relevant. Aus Daten des [statistischen Bundesamts](https://www.statistischebibliothek.de/mir/receive/DESerie_mods_00002310) über die finanziellen Aufwendungen pro Schüler gestaffelt nach Schulart errechnen sich zusätzliche Kosten in Höhe von `r format(res$interimDegrees$education_cost)`. Diese Kosten sind kleiner als der erwartete Anstieg der Steuereinnahmen aufgrund des höheren Bildungsniveaus (`r format(res$interimDegrees$tax_revenue_increase, T)`€). Zur Berechnung der Bildungsrenditen über das gesamte Berufsleben werden administrative Daten des IAB verwendet. Die Bildungsreform hatte folglich netto einen positiven Effekt auf das Staatsbudget. Ebenso profitieren Schüler von dem Abschluss des Gymnasiums. Es wird eine Zunahme des Lebenszeitnettoeinkommen von `r format(res$interimDegrees$net_income_increase)` prognostiziert. Die einzelnen Effektgrößen sind in folgender Grafik dargestellt:
 ```{r echo = FALSE, fig.align = 'center', fig.width = 8, fig.height = 2.4, fig.showtext=TRUE}
makePlot("interimDegrees", "cost", "Kostenkomposition der Gymnasialrefrom")
```
 Das Kosten-Nutzen Verhältnis, definiert als Marginal Value of Public Funds, ist somit unendlich. Es entstanden dem Staat keine Kosten; es konnte sogar zusätzliches Steueraufkommen generiert werden, während einige Schüler besser gestellt wurden durch ihr höheres Bildungsniveau.


## Verlängerung Hauptschule/Mittelschule um 1 Jahr
 Alle deutschen Bundesländer haben die Schulzeit bis zum Erreichen des ersten allgemeinbildenden Schulabschluss nach Abschluss der Hauptschule/Mittelschule - die Bezeichnung unterscheidet sich je nach Bundesland - von 8 auf 9 Jahre erhöht. Das Timing der Reform unterscheidet sich stark. Während die ersten Bundesländer, Hamburg und Schleswig-Holstein, bereits 1946 bzw. 1947 die 9. Klasse an Hauptschulen einführten, ging Bayern als letztes Bundesland diesen Schritt erst im Jahr 1969. Durch die gestaffelte Einführung der Reform ergibt sich ein natürliches Experiment, das zur Berechnung der Bildungsrendite eines zusätzlichen Schuljahres verwendet werden kann. In einem einflussreichen Papier zeigen [Pischke & von Wachter (2008)](https://ideas.repec.org/a/tpr/restat/v90y2008i3p592-598.html), dass die zusätzliche Schulzeit von einem Jahr keinen signifikanten Effekt auf die später erzielten Einkommen hat. Dieses Resultat überrascht, da der Großteil der internationalen Literatur stark positive Bildungsrenditen, oft im Bereich von 5%-15% pro Jahr, findet. [Kamhöfer & Schmitz (2016)](https://ideas.repec.org/a/wly/japmet/v31y2016i5p912-919.html) bestätigen die Ergebnisse von Pischke & von Wachter (2008). Es gibt keinen relevanten Effekt des zusätzlichen Schuljahres auf das Einkommen der direkt betroffenen Generation. [Piopiunik (2014)](https://ideas.repec.org/a/tpr/restat/v90y2008i3p592-598.html) zeigt jedoch einen partiellen Effekt auf die Kindergeneration. Söhne deren Mütter die neunte Klasse der Hauptschule/Mittelschule besuchten, haben eine 0.335 Prozentpunkte gesteigerte Wahrscheinlichkeit mindestens einen Realschulabschluss zu besitzen. Wie auch bei den anderen Bildungsreformen wird eine Einkommensprojektion verwendet um den Effekt der gestiegenen Bildung auf das Lebenszeiteinkommen und die damit verbundenen Steuerzahlungen zu berechnen. Die Zahlungsbereitschaft setzt sich aus den Effekten auf das Lebenszeitnettoeinkommen der Elterngeneration und der Kindergeneration zusammen. Für die Elterngeneration werden die Ergebnisse von Kamhöfer & Schmitz (2016) zugrunde gelegt. Es ergibt sich ein kleiner negativer Effekt auf das Lebenszeiteinkommen von `r format(res$compulsarySchooling$net_income_increase_parents)` Euro. Der Barwert des Effekts auf die Kindergeneration beträgt `r format(res$compulsarySchooling$net_income_increase_parents)` Euro. Die staatlichen Kosten setzten sich aus vier Komponenten zusammen. Zunächst wird der Effekt auf die Steuerzahlungen der Kinder und Elterngeneration berücksichtigt (`r format(res$compulsarySchooling$tax_revenue_increase)`€ bzw. `r format(res$compulsarySchooling$tax_revenue_increase_parents)`. Dazu kommen zusätzliche Ausbildungskosten für das weitere Schuljahr in Höhe von `r format(res$compulsarySchooling$program_cost)` Euro. Als letztes werden noch zusätzliche Ausbildungskosten der Kindergeneration berücksichtigt. Diese betragen `r format(res$compulsarySchooling$education_cost)` Euro. Das folgende Balkendiagramm dient zur Illustration der einzelnen Komponenten.
```{r echo = FALSE, fig.align = 'center', fig.width = 8, fig.height = 2.75, fig.showtext=TRUE}
makePlot("compulsarySchooling", "cost", "Kostenkomposition der Schulzeitverlängerung")
```
Allgemein gilt bei dieser Reform, dass die positiven Effekte auf das Bildungsniveau und damit auch auf das Steueraufkommen erst bei der Kindergeneration eintreten. Deshalb ist die Wahl der Diskontrate, also des Zinssatzes der genutzt wird um zukünftige Geldströme abzuzinsen, essenziell. Die bisherigen Rechnungen gehen von einer Diskontrate von 3% aus. Es resultiert ein MVPF von `r format(res$compulsarySchooling$mvpf)`. Bei einer niedrigeren Diskontrate von 1% wird der positive Effekt auf das öffentliche Budget durch die gestiegenen Steuerzahlungen weniger stark abgezinst. Der MVPF ist unter dieser Annahme unendlich. Die Reform wäre somit selbstfinanzierend.

## Studiengebühren
Im Jahr 2005 kippte das Bundesverfassungsgericht ein seit 2001 geltendes Verbot von Studiengebühren an deutschen Hochschulen. Daraufhin wurden in den Jahren 2006 und 2007 in sieben von der Union regierten Bundesländer Studiengebühren eingeführt. Darunter befanden sich die fünf bevölkerungsreichsten Bundesländer (Nordrhein-Westfalen, Bayern, Baden-Württemberg, Niedersachsen und Hessen), sodass die Mehrzahl der Studierenden in Deutschland Studiengebühren entrichten musste. Die Höhe der Studiengebühren beliefen sich dabei in der Regel auf 500€ pro Semester. Die Einführung der Studiengebühren war politisch kontrovers. Es bestand die Sorge, dass die neu eingeführten Gebühren die Studienanfängerquote reduzieren könnte. Ob dies tatsächlich zutrifft und wie groß der Effekt der Studiengebühren war, ist Gegenstand bildungsökonomischer Forschung. Der Großteil der Literatur findet einen negativen Effekt auf die Studienanfängerquote im Bereich von wenigen Prozentpunkten. Zur folgenden Kosten-Nutzen Analyse wird ein Resultat von [Bruckmeier & Wigger (2014)](https://ideas.repec.org/a/eee/ecoedu/v41y2014icp14-23.html) verwendet. Die Autoren finden einen negativen Effekt auf die Studienanfängerquote in Höhe von 0,921 Prozentpunkten. Die Schätzung liegt damit im unteren Bereich der in der Literatur zu findenden Effekte. Um den Nutzen der Reform für die Studierenden und die Auswirkungen auf das öffentliche Budget zu bestimmen, müssen die erwarteten Lebenszeiteinkommen unterschiedliche Bildungspfade verglichen werden. Hierfür werden Daten des IAB über Durchschnittseinkommen in der Bevölkerung gestaffelt nach Alter und Bildungsabschluss verwendet, um eine Einkommensprojektion zu erstellen. Gemäß der Einkommensprojektion entspricht der Barwert eines Universitätsabschlusses 312.807€. Davon entfallen 150.020€ auf den Staat in Form von Einkommensteuerzahlungen und Beiträgen zur Kranken- und Pflegeversicherung. Da der Anteil der Studienanfänger um  0,921 Prozentpunkte zurückging, ergibt sich ein erwarteter Steuerverlust in Höhe von 312.807€ ✕ 0.00921 =`r format(res$tuitionFees$tax_revenue_increase)`€ pro Studienberechtigten. Auf Seite der Studienberechtigten sinkt das erwartete Nettoeinkommen um (312.807€ - 150.020€) ✕ 0.00921 =`r format(res$tuitionFees$net_income_increase)`€. Durch die Erhebung der Studiengebühren in Höhe von 1000€ pro Jahr fallen bei einer durchschnittlichen Studiendauer von 5 Jahren diskontierte Kosten in Höhe von 4784€ an. Da nur 44% der Studienberechtigten ein Studium aufnehmen und etwa 30 der Studierenden von Studiengebühren befreit sind, müssen diese Kosten mit 0.44 ✕ 0.7 gewichtet werden. Somit werden im Durchschnitt durch die Erhebung der Studiengebühren `r format(res$tuitionFees$program_cost)`€ von den Studienberechtigten zum Staat hin umverteilt. Letztlich werden weitere `r format(res$tuitionFees$education_cost)`€ an Ausbildungskosten auf Seite des Staates durch die geringe Anzahl an Studienanfängern eingespart. Die Zusammensetzung der Zahlungsbereitschaft als auch die staatlichen Kosten sind in den folgenden Grafiken dargestellt:
```{r echo = FALSE, fig.align = 'center', fig.width = 8, fig.height = 2.4, fig.showtext=TRUE}
makePlot("tuitionFees", "cost", "Kostenkomposition für die Einführung von Studiengebühren")
```
```{r echo = FALSE, fig.align = 'center', fig.width = 8, fig.height = 2.4, fig.showtext=TRUE}
makePlot("tuitionFees", "wtp", "Zahlungsbereitschaft für die Einführung von Studiengebühren")
```
Es fällt auf, dass sowohl die Zahlungsbereitschaft als auch die fiskalischen Kosten in Summe negativ sind. Dies ist zunächst nicht überraschend; durch die Einführung der Studiengebühren spart der Staat also Geld. Gleichzeitig verlieren Studienberechtigte durch die Erhebung der Studiengebühren und durch die geringere Studienanfängerquote. Jedoch geht ein relevanter Teil der Einnahmen durch die Studiengebühren wieder durch niedrigere Steuereinnahmen der im Durchschnitt nun weniger gebildeten Studienberechtigte verloren. Der MVPF beträgt `r format(res$tuitionFees$mvpf)`. Da sowohl der Nenner als auch der Zähler negativ sind, gibt der MVPF an wie viel Wert auf Seiten der Studienberechtigten pro Euro generierten Steueraufkommen verloren gehen. Ein zusätzlicher Euro Steueraufkommen hatte also einen Verlust von `r format(res$tuitionFees$mvpf)` auf Seiten der Studienberechtigten zur Folge.


